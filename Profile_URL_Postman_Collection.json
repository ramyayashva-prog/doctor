{
  "info": {
    "name": "Profile URL Input and Output API",
    "description": "Complete API collection for doctor profile URL management including input, output, and validation endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{auth_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "doctor_id",
      "value": "D17587987732214",
      "type": "string"
    },
    {
      "key": "profile_url",
      "value": "https://www.drramya.com/profile",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Doctor Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.token) {",
                  "        pm.collectionVariables.set('auth_token', response.token);",
                  "        console.log('Auth token saved:', response.token);",
                  "    }",
                  "    if (response.doctor_id) {",
                  "        pm.collectionVariables.set('doctor_id', response.doctor_id);",
                  "        console.log('Doctor ID saved:', response.doctor_id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ramyayashva@gmail.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor-login",
              "host": ["{{base_url}}"],
              "path": ["doctor-login"]
            },
            "description": "Login as a doctor to get authentication token"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Profile URL Management",
      "item": [
        {
          "name": "Get Doctor Profile (Check Current Profile URL)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Get current doctor profile including existing profile URL"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"email\": \"ramyayashva@gmail.com\",\n    \"specialization\": \"General Medicine\",\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"hospital_name\": \"City General Hospital\",\n    \"consultation_fee\": 500,\n    \"created_at\": \"2025-01-26T10:30:00Z\",\n    \"updated_at\": \"2025-01-26T15:45:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Update Profile with Valid URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with a valid profile URL"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"Profile updated successfully\",\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"updated_at\": \"2025-01-26T16:00:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Update Profile with Different URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.linkedin.com/in/dr-ramya-yashva\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with a different valid profile URL (LinkedIn)"
          },
          "response": []
        },
        {
          "name": "Update Profile with Empty URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with empty profile URL (should clear the URL)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "URL Validation Tests",
      "item": [
        {
          "name": "Test Valid HTTPS URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with valid HTTPS URL"
          },
          "response": []
        },
        {
          "name": "Test Valid HTTP URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"http://www.example.com/doctor-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with valid HTTP URL"
          },
          "response": []
        },
        {
          "name": "Test Invalid URL Format",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"invalid-url-format\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with invalid URL format (should be accepted by backend but validated by Flutter)"
          },
          "response": []
        },
        {
          "name": "Test URL with Query Parameters",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile?ref=medical-portal&id=123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with URL containing query parameters"
          },
          "response": []
        },
        {
          "name": "Test URL with Fragment",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile#contact-section\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with URL containing fragment identifier"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Profile URL Output Tests",
      "item": [
        {
          "name": "Get Profile with URL Display",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Get doctor profile to verify profile URL is included in response"
          },
          "response": [
            {
              "name": "Profile with URL",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"email\": \"ramyayashva@gmail.com\",\n    \"specialization\": \"General Medicine\",\n    \"license_number\": \"MED123456\",\n    \"experience_years\": 5,\n    \"hospital_name\": \"City General Hospital\",\n    \"address\": \"123 Medical Street\",\n    \"city\": \"Mumbai\",\n    \"state\": \"Maharashtra\",\n    \"pincode\": \"400001\",\n    \"consultation_fee\": 500,\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"available_timings\": {},\n    \"languages\": [],\n    \"qualifications\": [],\n    \"created_at\": \"2025-01-26T10:30:00Z\",\n    \"updated_at\": \"2025-01-26T16:00:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get All Doctors with Profile URLs",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctors",
              "host": ["{{base_url}}"],
              "path": ["doctors"]
            },
            "description": "Get all doctors to see profile URLs in list view"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Handling Tests",
      "item": [
        {
          "name": "Update Profile without Authentication",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test profile update without authentication token"
          },
          "response": [
            {
              "name": "Unauthorized Response",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"Authentication required\"\n}"
            }
          ]
        },
        {
          "name": "Update Non-existent Doctor Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Test\",\n  \"last_name\": \"Doctor\",\n  \"profile_url\": \"https://www.example.com/test-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/NONEXISTENT123",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "NONEXISTENT123"]
            },
            "description": "Test updating profile for non-existent doctor ID"
          },
          "response": []
        },
        {
          "name": "Update Profile with Missing Required Fields",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test updating profile with only profile_url (missing required fields)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Flutter App Integration Tests",
      "item": [
        {
          "name": "Test Profile URL Input Validation",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test the exact payload that Flutter app sends for profile URL input"
          },
          "response": []
        },
        {
          "name": "Test Profile URL Output for Flutter Display",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test the response format that Flutter app expects for profile URL display"
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-generate test data if needed",
          "if (!pm.collectionVariables.get('profile_url')) {",
          "    pm.collectionVariables.set('profile_url', 'https://www.drramya.com/profile');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script for all requests",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has proper content type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Test for profile URL in response if it's a profile-related request",
          "if (pm.request.url.path.includes('profile') && pm.response.code === 200) {",
          "    const response = pm.response.json();",
          "    if (response.doctor && response.doctor.profile_url !== undefined) {",
          "        pm.test('Profile URL is present in response', function () {",
          "            pm.expect(response.doctor).to.have.property('profile_url');",
          "        });",
          "    }",
          "}"
        ]
      }
    }
  ]
}
  "info": {
    "name": "Profile URL Input and Output API",
    "description": "Complete API collection for doctor profile URL management including input, output, and validation endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{auth_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "doctor_id",
      "value": "D17587987732214",
      "type": "string"
    },
    {
      "key": "profile_url",
      "value": "https://www.drramya.com/profile",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Doctor Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.token) {",
                  "        pm.collectionVariables.set('auth_token', response.token);",
                  "        console.log('Auth token saved:', response.token);",
                  "    }",
                  "    if (response.doctor_id) {",
                  "        pm.collectionVariables.set('doctor_id', response.doctor_id);",
                  "        console.log('Doctor ID saved:', response.doctor_id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ramyayashva@gmail.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor-login",
              "host": ["{{base_url}}"],
              "path": ["doctor-login"]
            },
            "description": "Login as a doctor to get authentication token"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Profile URL Management",
      "item": [
        {
          "name": "Get Doctor Profile (Check Current Profile URL)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Get current doctor profile including existing profile URL"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"email\": \"ramyayashva@gmail.com\",\n    \"specialization\": \"General Medicine\",\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"hospital_name\": \"City General Hospital\",\n    \"consultation_fee\": 500,\n    \"created_at\": \"2025-01-26T10:30:00Z\",\n    \"updated_at\": \"2025-01-26T15:45:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Update Profile with Valid URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with a valid profile URL"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"Profile updated successfully\",\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"updated_at\": \"2025-01-26T16:00:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Update Profile with Different URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.linkedin.com/in/dr-ramya-yashva\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with a different valid profile URL (LinkedIn)"
          },
          "response": []
        },
        {
          "name": "Update Profile with Empty URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with empty profile URL (should clear the URL)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "URL Validation Tests",
      "item": [
        {
          "name": "Test Valid HTTPS URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with valid HTTPS URL"
          },
          "response": []
        },
        {
          "name": "Test Valid HTTP URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"http://www.example.com/doctor-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with valid HTTP URL"
          },
          "response": []
        },
        {
          "name": "Test Invalid URL Format",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"invalid-url-format\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with invalid URL format (should be accepted by backend but validated by Flutter)"
          },
          "response": []
        },
        {
          "name": "Test URL with Query Parameters",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile?ref=medical-portal&id=123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with URL containing query parameters"
          },
          "response": []
        },
        {
          "name": "Test URL with Fragment",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile#contact-section\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with URL containing fragment identifier"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Profile URL Output Tests",
      "item": [
        {
          "name": "Get Profile with URL Display",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Get doctor profile to verify profile URL is included in response"
          },
          "response": [
            {
              "name": "Profile with URL",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"email\": \"ramyayashva@gmail.com\",\n    \"specialization\": \"General Medicine\",\n    \"license_number\": \"MED123456\",\n    \"experience_years\": 5,\n    \"hospital_name\": \"City General Hospital\",\n    \"address\": \"123 Medical Street\",\n    \"city\": \"Mumbai\",\n    \"state\": \"Maharashtra\",\n    \"pincode\": \"400001\",\n    \"consultation_fee\": 500,\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"available_timings\": {},\n    \"languages\": [],\n    \"qualifications\": [],\n    \"created_at\": \"2025-01-26T10:30:00Z\",\n    \"updated_at\": \"2025-01-26T16:00:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get All Doctors with Profile URLs",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctors",
              "host": ["{{base_url}}"],
              "path": ["doctors"]
            },
            "description": "Get all doctors to see profile URLs in list view"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Handling Tests",
      "item": [
        {
          "name": "Update Profile without Authentication",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test profile update without authentication token"
          },
          "response": [
            {
              "name": "Unauthorized Response",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"Authentication required\"\n}"
            }
          ]
        },
        {
          "name": "Update Non-existent Doctor Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Test\",\n  \"last_name\": \"Doctor\",\n  \"profile_url\": \"https://www.example.com/test-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/NONEXISTENT123",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "NONEXISTENT123"]
            },
            "description": "Test updating profile for non-existent doctor ID"
          },
          "response": []
        },
        {
          "name": "Update Profile with Missing Required Fields",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test updating profile with only profile_url (missing required fields)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Flutter App Integration Tests",
      "item": [
        {
          "name": "Test Profile URL Input Validation",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test the exact payload that Flutter app sends for profile URL input"
          },
          "response": []
        },
        {
          "name": "Test Profile URL Output for Flutter Display",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test the response format that Flutter app expects for profile URL display"
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-generate test data if needed",
          "if (!pm.collectionVariables.get('profile_url')) {",
          "    pm.collectionVariables.set('profile_url', 'https://www.drramya.com/profile');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script for all requests",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has proper content type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Test for profile URL in response if it's a profile-related request",
          "if (pm.request.url.path.includes('profile') && pm.response.code === 200) {",
          "    const response = pm.response.json();",
          "    if (response.doctor && response.doctor.profile_url !== undefined) {",
          "        pm.test('Profile URL is present in response', function () {",
          "            pm.expect(response.doctor).to.have.property('profile_url');",
          "        });",
          "    }",
          "}"
        ]
      }
    }
  ]
}
  "info": {
    "name": "Profile URL Input and Output API",
    "description": "Complete API collection for doctor profile URL management including input, output, and validation endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{auth_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "doctor_id",
      "value": "D17587987732214",
      "type": "string"
    },
    {
      "key": "profile_url",
      "value": "https://www.drramya.com/profile",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Doctor Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.token) {",
                  "        pm.collectionVariables.set('auth_token', response.token);",
                  "        console.log('Auth token saved:', response.token);",
                  "    }",
                  "    if (response.doctor_id) {",
                  "        pm.collectionVariables.set('doctor_id', response.doctor_id);",
                  "        console.log('Doctor ID saved:', response.doctor_id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ramyayashva@gmail.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor-login",
              "host": ["{{base_url}}"],
              "path": ["doctor-login"]
            },
            "description": "Login as a doctor to get authentication token"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Profile URL Management",
      "item": [
        {
          "name": "Get Doctor Profile (Check Current Profile URL)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Get current doctor profile including existing profile URL"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"email\": \"ramyayashva@gmail.com\",\n    \"specialization\": \"General Medicine\",\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"hospital_name\": \"City General Hospital\",\n    \"consultation_fee\": 500,\n    \"created_at\": \"2025-01-26T10:30:00Z\",\n    \"updated_at\": \"2025-01-26T15:45:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Update Profile with Valid URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with a valid profile URL"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"Profile updated successfully\",\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"updated_at\": \"2025-01-26T16:00:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Update Profile with Different URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.linkedin.com/in/dr-ramya-yashva\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with a different valid profile URL (LinkedIn)"
          },
          "response": []
        },
        {
          "name": "Update Profile with Empty URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Update doctor profile with empty profile URL (should clear the URL)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "URL Validation Tests",
      "item": [
        {
          "name": "Test Valid HTTPS URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with valid HTTPS URL"
          },
          "response": []
        },
        {
          "name": "Test Valid HTTP URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"http://www.example.com/doctor-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with valid HTTP URL"
          },
          "response": []
        },
        {
          "name": "Test Invalid URL Format",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"invalid-url-format\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with invalid URL format (should be accepted by backend but validated by Flutter)"
          },
          "response": []
        },
        {
          "name": "Test URL with Query Parameters",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile?ref=medical-portal&id=123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with URL containing query parameters"
          },
          "response": []
        },
        {
          "name": "Test URL with Fragment",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.example.com/doctor-profile#contact-section\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test with URL containing fragment identifier"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Profile URL Output Tests",
      "item": [
        {
          "name": "Get Profile with URL Display",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Get doctor profile to verify profile URL is included in response"
          },
          "response": [
            {
              "name": "Profile with URL",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"doctor\": {\n    \"doctor_id\": \"D17587987732214\",\n    \"first_name\": \"Dr. Ramya\",\n    \"last_name\": \"Yashva\",\n    \"email\": \"ramyayashva@gmail.com\",\n    \"specialization\": \"General Medicine\",\n    \"license_number\": \"MED123456\",\n    \"experience_years\": 5,\n    \"hospital_name\": \"City General Hospital\",\n    \"address\": \"123 Medical Street\",\n    \"city\": \"Mumbai\",\n    \"state\": \"Maharashtra\",\n    \"pincode\": \"400001\",\n    \"consultation_fee\": 500,\n    \"profile_url\": \"https://www.drramya.com/profile\",\n    \"available_timings\": {},\n    \"languages\": [],\n    \"qualifications\": [],\n    \"created_at\": \"2025-01-26T10:30:00Z\",\n    \"updated_at\": \"2025-01-26T16:00:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get All Doctors with Profile URLs",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctors",
              "host": ["{{base_url}}"],
              "path": ["doctors"]
            },
            "description": "Get all doctors to see profile URLs in list view"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Handling Tests",
      "item": [
        {
          "name": "Update Profile without Authentication",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test profile update without authentication token"
          },
          "response": [
            {
              "name": "Unauthorized Response",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["doctor", "profile", "{{doctor_id}}"]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"Authentication required\"\n}"
            }
          ]
        },
        {
          "name": "Update Non-existent Doctor Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Test\",\n  \"last_name\": \"Doctor\",\n  \"profile_url\": \"https://www.example.com/test-profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/NONEXISTENT123",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "NONEXISTENT123"]
            },
            "description": "Test updating profile for non-existent doctor ID"
          },
          "response": []
        },
        {
          "name": "Update Profile with Missing Required Fields",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"profile_url\": \"https://www.example.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test updating profile with only profile_url (missing required fields)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Flutter App Integration Tests",
      "item": [
        {
          "name": "Test Profile URL Input Validation",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"first_name\": \"Dr. Ramya\",\n  \"last_name\": \"Yashva\",\n  \"specialization\": \"General Medicine\",\n  \"license_number\": \"MED123456\",\n  \"experience_years\": 5,\n  \"hospital_name\": \"City General Hospital\",\n  \"address\": \"123 Medical Street\",\n  \"city\": \"Mumbai\",\n  \"state\": \"Maharashtra\",\n  \"pincode\": \"400001\",\n  \"consultation_fee\": 500,\n  \"profile_url\": \"https://www.drramya.com/profile\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test the exact payload that Flutter app sends for profile URL input"
          },
          "response": []
        },
        {
          "name": "Test Profile URL Output for Flutter Display",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/doctor/profile/{{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctor", "profile", "{{doctor_id}}"]
            },
            "description": "Test the response format that Flutter app expects for profile URL display"
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-generate test data if needed",
          "if (!pm.collectionVariables.get('profile_url')) {",
          "    pm.collectionVariables.set('profile_url', 'https://www.drramya.com/profile');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script for all requests",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has proper content type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Test for profile URL in response if it's a profile-related request",
          "if (pm.request.url.path.includes('profile') && pm.response.code === 200) {",
          "    const response = pm.response.json();",
          "    if (response.doctor && response.doctor.profile_url !== undefined) {",
          "        pm.test('Profile URL is present in response', function () {",
          "            pm.expect(response.doctor).to.have.property('profile_url');",
          "        });",
          "    }",
          "}"
        ]
      }
    }
  ]
}
